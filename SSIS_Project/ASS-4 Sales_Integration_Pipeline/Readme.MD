# ğŸ›’ Retail Sales Integration & Data Quality Pipeline

---

## ğŸ¯ Project Overview

This project implements a comprehensive **ETL (Extract, Transform, Load)** pipeline that processes daily retail sales data from multiple regional systems, performs intelligent data quality validation using fuzzy matching algorithms, and produces clean, aggregated data ready for business intelligence and reporting.

---

## ğŸŒŸ Key Highlights

- âœ… **Automated Data Quality** - Fuzzy customer name matching with 80% similarity threshold
- âœ… **Star Schema Design** - Professional data warehouse dimensional modeling
- âœ… **Error Handling** - Complete rejection tracking 
- âœ… **Scalable Architecture** - Modular SSIS packages for maintainability

---

## ğŸ’¼ Business Problem

### Current State:

- ğŸ“‚ Multiple regional stores submit daily sales CSV files (East & West regions)
- âŒ Customer names have inconsistencies ("John Smith" vs "Jon Smyth")
- âŒ Product codes need validation
- âŒ No centralized, clean data
- âŒ No audit trail

### Solution Delivered:

- âœ… Clean, validated sales data
- âœ… Standardized customer names
- âœ… Enriched dimensional context
- âœ… Automated daily aggregations
- âœ… Complete rejection tracking

---

## ğŸ—ï¸ Solution Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SOURCE: CSV FILES                         â”‚
â”‚      Regional Sales (East.csv, West.csv) by Date           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DIMENSION BUILDING LAYER                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Fuzzy        â”‚              â”‚ Product      â”‚          â”‚
â”‚   â”‚ Grouping     â”‚              â”‚ Extraction   â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                              â”‚                  â”‚
â”‚          â–¼                              â–¼                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Dim_Customer â”‚              â”‚ Dim_Product  â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VALIDATION & ENRICHMENT                        â”‚
â”‚  â€¢ Fuzzy Customer Matching (â‰¥80%)                          â”‚
â”‚  â€¢ Product Code Validation                                  â”‚
â”‚  â€¢ Data Quality Rules                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
         â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fact_Sales  â”‚        â”‚ Sales        â”‚
â”‚ _Clean      â”‚        â”‚ _Rejected    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sales_Daily  â”‚
â”‚ _Summary     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ Key Features

### 1. ğŸ¤– Intelligent Data Quality

**Fuzzy Customer Matching**

- Handles typos: "John Smit" â†’ "John Smith" (92% match)
- Format variations: "Smith, John" â†’ "John Smith"
- 80% similarity threshold
- Preserves original + canonical names

### 2. âœ”ï¸ Data Validation

- Product code validation
- Customer ID assignment
- Foreign key enforcement
- Region extraction from Order IDs

### 3. ğŸ“Š Error Tracking

- Detailed rejection reasons
- Match confidence scores
- Source file tracking

### 4. ğŸ—„ï¸ Dimensional Model

- Star schema design
- Surrogate keys
- Optimized indexes
- SCD-ready structure

### 5. ğŸ“ˆ Automated Aggregations

- Daily summaries by Date/Region/Product
- Pre-calculated metrics
- Fast query performance

---

## ğŸ› ï¸ Technology Stack

| Component | Technology |
|-----------|-----------|
| **ETL Tool** | SQL Server Integration Services (SSIS) 2016+ |
| **Database** | Microsoft SQL Server 2016+ |
| **IDE** | Visual Studio / SQL Server Data Tools |
| **Language** | T-SQL, SSIS Expression Language |

### Key SSIS Components:

- Fuzzy Grouping Transformation
- Lookup Transformation
- Conditional Split
- Aggregate Transformation
- Derived Column
- OLE DB Source/Destination

---

## ğŸ“Š Database Schema

### Tables Created:

**Dimensions:**
- `Dim_Customer_master_table` - Customer master data
- `Dim_Product_master_table` - Product catalog

**Facts:**
- `Fact_Sales_Clean` - Validated sales (17 columns)
- `Sales_Rejected` - Rejected records (16 columns)
- `Sales_Daily_Summary` - Aggregations (12 columns)

**Supporting:**
- `fuzzy_grouping` - Customer matching results

### Entity Relationship:

```
Dim_Customer â”€â”€â”
               â”œâ”€â”€> Fact_Sales_Clean â”€â”€> Sales_Daily_Summary
Dim_Product â”€â”€â”€â”˜
```

### Execution Order:

1. **CustomerDimension** - Builds Dim_Customer via fuzzy grouping
2. **ProductDimension** - Builds Dim_Product from sales data
3. **MainETL** - Validates & loads Fact_Sales_Clean + Sales_Rejected
4. **Summary** - Creates Sales_Daily_Summary aggregations

---

## ğŸ”„ Data Flow

### Customer Dimension Pipeline:

```
CSV â†’ Fuzzy Grouping (80%) â†’ fuzzy_grouping table â†’ 
Extract canonical names â†’ Lookup OrderId â†’ 
Derive Region â†’ Dim_Customer
```

### Main ETL Pipeline:

```
CSV â†’ Lookup fuzzy_grouping (_score) â†’ 
Lookup Dim_Customer (CustomerId) â†’ 
Lookup Dim_Product (ProductId) â†’ 
Conditional Split (Valid/Invalid) â†’
â”œâ”€> Valid: Fact_Sales_Clean
â””â”€> Invalid: Sales_Rejected
```

### Summary Pipeline:

```
Fact_Sales_Clean â†’ Aggregate (Group by Date/Region/Product) â†’ 
Sales_Daily_Summary
```

---

## ğŸ“ˆ Results

### Sample Input (CSV):

```csv
OrderId,OrderDate,CustomerName,ProductCode,Quantity,Amount
E1001,2026-02-10,John Smith,P1001,2,200
E1002,2026-02-10,Jon Smyth,P1001,1,100
```

### Sample Output (Fact_Sales_Clean):

| OrderId | CustomerId | ProductId | OriginalName | CanonicalName | MatchScore |
|---------|-----------|-----------|--------------|---------------|-----------|
| E1001 | 1 | 0 | John Smith | John Smith | 1.00 |
| E1002 | 1 | 0 | Jon Smyth | John Smith | 0.92 |

### Sample Aggregation (Sales_Daily_Summary):

| SalesDate | Region | ProductId | TotalQty | TotalAmt | RecordCount |
|-----------|--------|-----------|----------|----------|-------------|
| 2026-02-10 | E | 0 | 3 | 300 | 2 |

---

## ğŸ“ Learning Outcomes

This project demonstrates:

- âœ… **SSIS Development** - Complex data flows, transformations
- âœ… **Fuzzy Matching** - Intelligent data quality algorithms
- âœ… **Dimensional Modeling** - Star schema, surrogate keys
- âœ… **Data Validation** - Multi-level quality checks
- âœ… **T-SQL** - Advanced queries, procedures
- âœ… **Error Handling** - Comprehensive rejection tracking
- âœ… **ETL Best Practices** - Modular design, logging, auditing

---

## ğŸ”® Future Enhancements

- [ ] Slowly Changing Dimensions (SCD Type 2)
- [ ] Incremental loading
- [ ] Power BI dashboards
- [ ] Email notifications
- [ ] Cloud migration (Azure Data Factory)
- [ ] Real-time streaming
- [ ] Machine learning integration

---

## ğŸ“ Project Structure

```
ASS-4_Sales-pipeline/
â”œâ”€â”€ SSIS_Packages/
â”‚   â”œâ”€â”€ Load_data.dtsx
â”‚   â”œâ”€â”€ CustomerDimension.dtsx
â”‚   â”œâ”€â”€ ProductDimension.dtsx
â”‚   â”œâ”€â”€ Transform.dtsx
â”‚   â””â”€â”€ Summary.dtsx
â”œâ”€â”€ Data/
â”‚   â”œâ”€â”€ 2026-02-10/
â”‚   â”‚   â”œâ”€â”€ East.csv
â”‚   â”‚   â””â”€â”€ West.csv
â”‚   â”œâ”€â”€ 2026-02-11/
â”‚   â”‚   â”œâ”€â”€ East.csv
â”‚   â”‚   â””â”€â”€ West.csv
â”‚   â”œâ”€â”€ 2026-02-12/
â”‚   â”‚   â”œâ”€â”€ East.csv
â”‚   â”‚   â””â”€â”€ West.csv
â””â”€â”€ README.md
```

---

## ğŸ‘¤ Author

**Yash Vaghasiya**

---


